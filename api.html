

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API &mdash; PeakSQL  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="PeakSQL" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> PeakSQL
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">PeakSQL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#installation">Installation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#getting-started">Getting started</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#database">DataBase</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dataset-loaders">DataSet loaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-peaksql.util">Util</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#database">DataBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-loaders">DataSet loaders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#peaksql-datasets-base">peaksql.datasets.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peaksql-datasets-bedregion">peaksql.datasets.bedregion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peaksql-datasets-narrowpeak-module">peaksql.datasets.narrowpeak module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-peaksql.util">Util</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PeakSQL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p>This is a collection of public functions and classes relevant for users of PeakSQL.</p>
<div class="section" id="database">
<h2>DataBase<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="peaksql.database.DataBase">
<em class="property">class </em><code class="sig-prename descclassname">peaksql.database.</code><code class="sig-name descname">DataBase</code><span class="sig-paren">(</span><em class="sig-param">db: str = 'PeakSQL.sqlite'</em>, <em class="sig-param">in_memory: bool = False</em><span class="sig-paren">)</span><a class="headerlink" href="#peaksql.database.DataBase" title="Permalink to this definition">¶</a></dt>
<dd><p>The DataBase class serves as an easy interface to store and retrieve NGS data in a
peaksql database.</p>
<dl class="method">
<dt id="peaksql.database.DataBase.add_assembly">
<code class="sig-name descname">add_assembly</code><span class="sig-paren">(</span><em class="sig-param">assembly_path: str</em>, <em class="sig-param">assembly: str = None</em>, <em class="sig-param">species: str = None</em><span class="sig-paren">)</span><a class="headerlink" href="#peaksql.database.DataBase.add_assembly" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an assembly (genome) to the database. Sequences from the assembly are
retrieved with PyFaidx, so they aren’t stored in the database, only the path to
the fasta file is stored. This thus assumes that the assembly does not change
location during during the database’s lifetime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assembly_path</strong> – The path to the assembly file.</p></li>
<li><p><strong>assembly</strong> – The name of the assembly (optional: default is the name of the
file).</p></li>
<li><p><strong>species</strong> – The name of the species the assembly belongs to (optional:
default is the assembly name)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="peaksql.database.DataBase.add_data">
<code class="sig-name descname">add_data</code><span class="sig-paren">(</span><em class="sig-param">data_path: str</em>, <em class="sig-param">assembly: str</em>, <em class="sig-param">condition: str = None</em><span class="sig-paren">)</span><a class="headerlink" href="#peaksql.database.DataBase.add_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Add data (bed, narrowPeak, or bedgraph) to the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_path</strong> – The path to the assembly file.</p></li>
<li><p><strong>assembly</strong> – The name of the assembly. Requires the assembly to be added to
the database prior.</p></li>
<li><p><strong>condition</strong> – Experimental condition (optional). This allows for filtering
on conditions , e.g. when streaming data with a DataSet.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="peaksql.database.DataBase.assemblies">
<em class="property">property </em><code class="sig-name descname">assemblies</code><a class="headerlink" href="#peaksql.database.DataBase.assemblies" title="Permalink to this definition">¶</a></dt>
<dd><p>All assemblies registred in the database.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="dataset-loaders">
<h2>DataSet loaders<a class="headerlink" href="#dataset-loaders" title="Permalink to this headline">¶</a></h2>
<div class="section" id="peaksql-datasets-base">
<h3>peaksql.datasets.base<a class="headerlink" href="#peaksql-datasets-base" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="peaksql.datasets.base._DataSet">
<em class="property">class </em><code class="sig-prename descclassname">peaksql.datasets.base.</code><code class="sig-name descname">_DataSet</code><span class="sig-paren">(</span><em class="sig-param">database: str</em>, <em class="sig-param">where: str = ''</em>, <em class="sig-param">seq_length: int = 200</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#peaksql.datasets.base._DataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>DataSet baseclass.</p>
<dl class="method">
<dt id="peaksql.datasets.base._DataSet.__getitem__">
<code class="sig-name descname">__getitem__</code><span class="sig-paren">(</span><em class="sig-param">index: int</em><span class="sig-paren">)</span> &#x2192; Tuple[numpy.ndarray, numpy.ndarray]<a class="headerlink" href="#peaksql.datasets.base._DataSet.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sequence in one-hot encoding and the label of the corresponding
index.</p>
</dd></dl>

<dl class="method">
<dt id="peaksql.datasets.base._DataSet.get_label">
<code class="sig-name descname">get_label</code><span class="sig-paren">(</span><em class="sig-param">assembly: str</em>, <em class="sig-param">chrom: str</em>, <em class="sig-param">chromstart: int</em>, <em class="sig-param">chromend: int</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#peaksql.datasets.base._DataSet.get_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the label that corresponds to chromstart:chromend.</p>
</dd></dl>

<dl class="method">
<dt id="peaksql.datasets.base._DataSet.get_onehot_sequence">
<code class="sig-name descname">get_onehot_sequence</code><span class="sig-paren">(</span><em class="sig-param">assembly: str</em>, <em class="sig-param">chrom: str</em>, <em class="sig-param">chromstart: int</em>, <em class="sig-param">chromend: int</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#peaksql.datasets.base._DataSet.get_onehot_sequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the one-hot encoded sequence based on the assembly, chromosome, chromstart
and chromend.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="peaksql-datasets-bedregion">
<h3>peaksql.datasets.bedregion<a class="headerlink" href="#peaksql-datasets-bedregion" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="peaksql-datasets-narrowpeak-module">
<h3>peaksql.datasets.narrowpeak module<a class="headerlink" href="#peaksql-datasets-narrowpeak-module" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="peaksql.datasets.narrowpeak.NarrowPeakDataSet">
<em class="property">class </em><code class="sig-prename descclassname">peaksql.datasets.narrowpeak.</code><code class="sig-name descname">NarrowPeakDataSet</code><span class="sig-paren">(</span><em class="sig-param">database: str</em>, <em class="sig-param">where: str = ''</em>, <em class="sig-param">seq_length: int = 200</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#peaksql.datasets.narrowpeak.NarrowPeakDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#peaksql.datasets.base._DataSet" title="peaksql.datasets.base._DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">peaksql.datasets.base._DataSet</span></code></a></p>
<p>The NarrowPeakDataSet expects that narrowPeak files have been added to the DataBase.</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-peaksql.util">
<span id="util"></span><h2>Util<a class="headerlink" href="#module-peaksql.util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="peaksql.util.sequence_to_onehot">
<code class="sig-prename descclassname">peaksql.util.</code><code class="sig-name descname">sequence_to_onehot</code><span class="sig-paren">(</span><em class="sig-param">sequence</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#peaksql.util.sequence_to_onehot" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a sequence of length n to a one-hot encoded array of shape (n x 4).</p>
<p>The nucleotides A, C, G, T respectively correspond to indices 0, 1, 2, 3.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="PeakSQL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Maarten van der Sande

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>